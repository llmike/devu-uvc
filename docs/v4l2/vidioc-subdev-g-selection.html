<?xml version="1.0" encoding="ANSI_X3.4-1968" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968" /><title>ioctl VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="LINUX MEDIA INFRASTRUCTURE API" /><link rel="up" href="user-func.html" title="Appendix&#160;A.&#160;Function Reference" /><link rel="prev" href="vidioc-subdev-g-frame-interval.html" title="ioctl VIDIOC_SUBDEV_G_FRAME_INTERVAL, VIDIOC_SUBDEV_S_FRAME_INTERVAL" /><link rel="next" href="vidioc-subscribe-event.html" title="ioctl VIDIOC_SUBSCRIBE_EVENT, VIDIOC_UNSUBSCRIBE_EVENT" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ioctl VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="vidioc-subdev-g-frame-interval.html">Prev</a>&#160;</td><th width="60%" align="center">Appendix&#160;A.&#160;Function Reference</th><td width="20%" align="right">&#160;<a accesskey="n" href="vidioc-subscribe-event.html">Next</a></td></tr></table><hr /></div><div class="refentry" title="ioctl VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION"><a id="vidioc-subdev-g-selection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION &#8212; Get or set selection rectangles on a subdev pad</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">ioctl</b>(</code></td><td>int <var class="pdparam">fd</var>, </td></tr><tr><td>&#160;</td><td>int <var class="pdparam">request</var>, </td></tr><tr><td>&#160;</td><td>struct v4l2_subdev_selection *<var class="pdparam">argp</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer">&#160;</div></div></div><div class="refsect1" title="Arguments"><a id="idp36704640"></a><h2>Arguments</h2><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>fd</code></em></span></dt><dd><p>File descriptor returned by <a class="link" href="func-open.html" title="V4L2 open()"><code class="function">open()</code></a>.</p></dd><dt><span class="term"><em class="parameter"><code>request</code></em></span></dt><dd><p>VIDIOC_SUBDEV_G_SELECTION, VIDIOC_SUBDEV_S_SELECTION</p></dd><dt><span class="term"><em class="parameter"><code>argp</code></em></span></dt><dd><p></p></dd></dl></div></div><div class="refsect1" title="Description"><a id="idp36708768"></a><h2>Description</h2><div class="note" title="Experimental" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Experimental</h3><p>This is an <a class="link" href="hist-v4l2.html#experimental" title="Experimental API Elements">experimental</a>
      interface and may change in the future.</p></div><p>The selections are used to configure various image
    processing functionality performed by the subdevs which affect the
    image size. This currently includes cropping, scaling and
    composition.</p><p>The selection API replaces <a class="link" href="vidioc-subdev-g-crop.html" title="ioctl VIDIOC_SUBDEV_G_CROP, VIDIOC_SUBDEV_S_CROP">the old subdev crop API</a>. All
    the function of the crop API, and more, are supported by the
    selections API.</p><p>See <a class="xref" href="subdev.html" title="Sub-device Interface">the section called &#8220;Sub-device Interface&#8221;</a> for
    more information on how each selection target affects the image
    processing pipeline inside the subdevice.</p><div class="refsect2" title="Types of selection targets"><a id="idp36712136"></a><h3>Types of selection targets</h3><p>There are two types of selection targets: actual and bounds. The
      actual targets are the targets which configure the hardware. The BOUNDS
      target will return a rectangle that contain all possible actual
      rectangles.</p></div><div class="refsect2" title="Discovering supported features"><a id="idp36712984"></a><h3>Discovering supported features</h3><p>To discover which targets are supported, the user can
      perform <code class="constant">VIDIOC_SUBDEV_G_SELECTION</code> on them.
      Any unsupported target will return
      <code class="constant">EINVAL</code>.</p><p>Selection targets and flags are documented in <a class="xref" href="apb.html#v4l2-selections-common" title="Common selection definitions">the section called &#8220;Common selection definitions&#8221;</a>.</p><div class="table"><a id="v4l2-subdev-selection"></a><p class="title"><b>Table&#160;A.104.&#160;struct <span class="structname">v4l2_subdev_selection</span></b></p><div class="table-contents"><table summary="struct v4l2_subdev_selection" width="100%" border="0"><colgroup><col /><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>which</code></em></td><td valign="top">Active or try selection, from
	    enum&#160;<a class="link" href="vidioc-subdev-g-fmt.html#v4l2-subdev-format-whence" title="Table&#160;A.102.&#160;enum v4l2_subdev_format_whence">v4l2_subdev_format_whence</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>pad</code></em></td><td valign="top">Pad number as reported by the media framework.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>target</code></em></td><td valign="top">Target selection rectangle. See
	    <a class="xref" href="apb.html#v4l2-selections-common" title="Common selection definitions">the section called &#8220;Common selection definitions&#8221;</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>flags</code></em></td><td valign="top">Flags. See
	    <a class="xref" href="apb.html#v4l2-selection-flags" title="Selection flags">the section called &#8220;Selection flags&#8221;</a>.</td></tr><tr><td valign="top">struct&#160;<a class="link" href="overlay.html#v4l2-rect" title="Table&#160;4.3.&#160;struct v4l2_rect">v4l2_rect</a></td><td valign="top"><em class="structfield"><code>rect</code></em></td><td valign="top">Selection rectangle, in pixels.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>reserved</code></em>[8]</td><td valign="top">Reserved for future extensions. Applications and drivers must
	    set the array to zero.</td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="refsect1" title="Return Value"><a id="idp36725080"></a><h2>Return Value</h2><p>On success <span class="returnvalue">0</span> is returned, on error <span class="returnvalue">-1</span> and the <code class="varname">errno</code> variable is set appropriately. The generic error codes are described at the <a class="link" href="gen_errors.html#gen-errors" title="Table&#160;19.1.&#160;Generic error codes">Generic Error Codes</a> chapter.</p><div class="variablelist"><dl><dt><span class="term"><span class="errorcode">EBUSY</span></span></dt><dd><p>The selection rectangle can't be changed because the
	  pad is currently busy. This can be caused, for instance, by
	  an active video stream on the pad. The ioctl must not be
	  retried without performing another action to fix the problem
	  first. Only returned by
	  <code class="constant">VIDIOC_SUBDEV_S_SELECTION</code></p></dd><dt><span class="term"><span class="errorcode">EINVAL</span></span></dt><dd><p>The struct&#160;<a class="link" href="vidioc-subdev-g-selection.html#v4l2-subdev-selection" title="Table&#160;A.104.&#160;struct v4l2_subdev_selection">v4l2_subdev_selection</a>
	  <em class="structfield"><code>pad</code></em> references a non-existing
	  pad, the <em class="structfield"><code>which</code></em> field references a
	  non-existing format, or the selection target is not
	  supported on the given subdev pad.</p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="vidioc-subdev-g-frame-interval.html">Prev</a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="user-func.html">Up</a></td><td width="40%" align="right">&#160;<a accesskey="n" href="vidioc-subscribe-event.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ioctl VIDIOC_SUBDEV_G_FRAME_INTERVAL, VIDIOC_SUBDEV_S_FRAME_INTERVAL&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&#160;ioctl VIDIOC_SUBSCRIBE_EVENT, VIDIOC_UNSUBSCRIBE_EVENT</td></tr></table></div></body></html>
